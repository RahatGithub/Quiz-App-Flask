
{% extends 'base.html' %}

{% block title %}Quiz Question{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
        <div>Level: {{ level }} | Question: {{ question_num }}/{{ total_questions }}</div>
        <div id="timer" class="badge bg-primary">30</div>
    </div>
    <div class="card-body">
        <h5 class="card-title">{{ question }}</h5>
        
        <form id="answerForm" method="post" action="{{ url_for('main.submit_answer') }}">
            <input type="hidden" name="time_taken" id="timeTaken" value="0">
            
            {% for option in options %}
            <div class="form-check mb-2">
                <input class="form-check-input" type="radio" name="answer" id="option{{ loop.index }}" value="{{ option }}">
                <label class="form-check-label" for="option{{ loop.index }}">
                    {{ option }}
                </label>
            </div>
            {% endfor %}
            
            <div class="mt-3 d-flex">
                <button type="submit" class="btn btn-primary">Submit Answer</button>
                <a href="{{ url_for('main.skip_question') }}" class="btn btn-secondary ms-2">Skip Question</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Timer functionality
    let timeLeft = 30;
    const timerElement = document.getElementById('timer');
    const timeTakenInput = document.getElementById('timeTaken');
    const form = document.getElementById('answerForm');
    
    const timer = setInterval(function() {
        timeLeft--;
        timerElement.textContent = timeLeft;
        timeTakenInput.value = 30 - timeLeft;
        
        if (timeLeft <= 0) {
            clearInterval(timer);
            form.submit(); // Auto-submit when time is up
        }
        
        // Change color when time is running out
        if (timeLeft <= 10) {
            timerElement.classList.replace('bg-primary', 'bg-danger');
        }
    }, 1000);
</script>
{% endblock %}